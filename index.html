<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Restaurant Ordering App</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; background: linear-gradient(135deg, #fceabb, #f8b500); }
  header { background: #ff5722; padding: 20px; color: white; font-size: 24px; text-align: center; font-weight: bold; }
  .category { margin: 15px; background: #fff; border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); overflow: hidden; }
  .category h2 { margin: 0; padding: 15px; cursor: pointer; background: #ff9800; color: white; display: flex; justify-content: space-between; align-items: center; }
  .items { display: none; padding: 10px; }
  .item { display: flex; justify-content: space-between; align-items: center; background: #fafafa; padding: 10px; margin: 8px 0; border-radius: 10px; border: 1px solid #ddd; }
  .item img { width: 40px; height: 40px; border-radius: 6px; margin-right: 10px; }
  .left { display: flex; align-items: center; gap: 10px; }
  input[type='number'], input[type='text'] { width: 70px; padding: 5px; font-size: 16px; }
  button { padding: 12px; width: 90%; margin: 10px 5%; background: #4caf50; color: white; border: none; border-radius: 12px; font-size: 18px; cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.2); }
  .edit-btn { background: #ff9800; padding: 5px 8px; border-radius: 6px; cursor: pointer; color: white; margin-left: 5px; }
  .delete-btn { background: #e53935; padding: 5px 8px; border-radius: 6px; cursor: pointer; color: white; margin-left: 5px; }
  #addForm { background: white; margin: 15px; padding: 15px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
  #summary { background: #fff; padding: 15px; margin: 15px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); display: none; }
  #search { width: 90%; padding: 12px; margin: 10px 5%; font-size: 16px; border-radius: 10px; border: 1px solid #ccc; }
</style>
</head>
<body>
<header>Restaurant Ordering App</header>
<div><input id="search" onkeyup="searchItems()" placeholder="Search item..." /></div>
<div id="app"></div>
<div id="addForm">
  <h3>Add New Category / Item</h3>
  <input id="newName" placeholder="Item or Category name" />
  <input id="newImg" placeholder="Image URL (optional)" />
  <select id="newCat"></select>
  <button onclick="addItem()">Add Item</button>
  <button onclick="addCategory()">Add Category</button>
</div>
<button onclick="generateSummary()">Generate WhatsApp Order</button>
<div id="summary"></div>
<script>
let categories = {
  "Bread": [],
  "Vegetables": [],
  "Proteins": [],
  "Cheese": [],
  "Fries": [],
  "Sauces": [],
  "Grains": [],
  "Cleaning": []
};

if (localStorage.categories) { categories = JSON.parse(localStorage.categories); }

const appDiv = document.getElementById('app');
const newCat = document.getElementById('newCat');

function refreshCatOptions() { newCat.innerHTML = ''; for (let c in categories) newCat.innerHTML += `<option>${c}</option>`; }
refreshCatOptions();

function render() {
  appDiv.innerHTML = '';
  for (let cat in categories) {
    let block = `<div class='category'><h2 onclick="toggleItems('${cat}')">${cat} <span>â–¼</span></h2><div class='items' id='items-${cat}'>`;
    categories[cat].forEach((item,index)=>{
      block += `<div class='item'><div class='left'><img src='${item.img||"https://via.placeholder.com/40"}'/><strong>${item.name}</strong></div><input type='number' id='${item.name}' placeholder='0'/><span class='edit-btn' onclick="editItem('${cat}',${index})">Edit</span><span class='delete-btn' onclick="deleteItem('${cat}',${index})">X</span></div>`;
    });
    block += `<div class='item'><input type='text' placeholder='Other item...' id='other-${cat}' /></div>`;
    block += `</div></div>`;
    appDiv.innerHTML += block;
  }
}

function toggleItems(cat) {
  const div = document.getElementById(`items-${cat}`);
  div.style.display = div.style.display==='block'?'none':'block';
}

function save() { localStorage.categories = JSON.stringify(categories); }

function addItem(){
  const name=document.getElementById('newName').value;
  const img=document.getElementById('newImg').value;
  const cat=document.getElementById('newCat').value;
  if(!name) return alert('Enter item name');
  categories[cat].push({name,img});
  save(); render();
}

function addCategory(){
  const name=document.getElementById('newName').value;
  if(!name) return alert('Enter category name');
  categories[name]=[]; save(); render(); refreshCatOptions();
}

function deleteItem(cat,index){ categories[cat].splice(index,1); save(); render(); }
function editItem(cat,index){ const newName=prompt('New name',categories[cat][index].name); if(!newName) return; categories[cat][index].name=newName; save(); render(); }

function searchItems(){
  const term=document.getElementById('search').value.toLowerCase();
  document.querySelectorAll('.item').forEach(i=>{
    const name=i.querySelector('strong')?.innerText.toLowerCase()||'';
    i.style.display=name.includes(term)?'flex':'none';
  });
}

function generateSummary(){
  let text='Your Order for Monday:%0A%0A';
  for(let cat in categories){
    text+=`*${cat}*%0A`;
    categories[cat].forEach(item=>{
      const qty=document.getElementById(item.name)?.value;
      if(qty>0) text+=`${item.name}: ${qty}%0A`;
    });
    const otherQty=document.getElementById(`other-${cat}`)?.value;
    if(otherQty) text+=`Other (${cat}): ${otherQty}%0A`;
    text+='%0A';
  }
  window.open(`https://wa.me/?text=${text}`);
}

render();
</script>
</body>
</html>
